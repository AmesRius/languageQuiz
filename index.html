<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Â∞èÂ≠¶ÁîüÂêë„ÅëÂ§ñÂõΩË™û„ÇØ„Ç§„Ç∫</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #e3f2fd 0%, #c8e6c9 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        .header {
            background: white;
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 20px;
            margin-bottom: 20px;
            text-align: center;
        }

        .header h1 {
            color: #1976d2;
            font-size: 28px;
            margin-bottom: 10px;
        }

        .header-info {
            display: flex;
            justify-content: space-between;
            color: #666;
            font-size: 14px;
        }

        .main-content {
            background: white;
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 40px;
            text-align: center;
        }

        .question-title {
            font-size: 36px;
            font-weight: bold;
            color: #333;
            margin-bottom: 40px;
        }

        .audio-section {
            margin-bottom: 40px;
        }

        .audio-button {
            background: #1976d2;
            color: white;
            border: none;
            border-radius: 50%;
            width: 100px;
            height: 100px;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            margin-bottom: 20px;
        }

        .audio-button:hover {
            background: #1565c0;
            transform: translateY(-2px);
        }

        .audio-button.playing {
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .audio-text {
            color: #666;
            margin-top: 10px;
        }

        .fallback-display {
            background: #e3f2fd;
            border-left: 4px solid #1976d2;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }

        .fallback-display.playing {
            background: #e8f5e8;
            border-left-color: #4caf50;
        }

        .fallback-text {
            color: #1976d2;
            font-weight: bold;
        }

        .fallback-description {
            color: #666;
            font-size: 12px;
            margin-top: 5px;
        }

        .next-button {
            background: #4caf50;
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 18px;
            border-radius: 10px;
            cursor: pointer;
            transition: background 0.3s ease;
            margin-bottom: 40px;
        }

        .next-button:hover {
            background: #45a049;
        }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 40px;
        }

        .option-button {
            background: white;
            border: 2px solid #ddd;
            padding: 25px;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 18px;
            font-weight: bold;
        }

        .option-button:hover:not(:disabled) {
            background: #f5f5f5;
        }

        .option-button.selected {
            background: #e3f2fd;
            border-color: #1976d2;
        }

        .option-button.correct {
            background: #ffebee;
            border-color: #f44336;
            color: #d32f2f;
        }

        .option-button.incorrect {
            background: #e3f2fd;
            border-color: #1976d2;
            color: #1976d2;
        }

        .option-button.disabled {
            background: #f5f5f5;
            color: #999;
            cursor: not-allowed;
        }

        .option-button:disabled {
            cursor: not-allowed;
        }

        .option-label {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-bottom: 5px;
        }

        .option-language {
            font-size: 14px;
            color: #666;
            font-weight: normal;
        }

        .playing-indicator {
            font-size: 12px;
            color: #1976d2;
            animation: pulse 1s infinite;
        }

        .answer-button {
            background: #ff9800;
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 18px;
            border-radius: 10px;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .answer-button:hover:not(:disabled) {
            background: #f57c00;
        }

        .answer-button:disabled {
            background: #ddd;
            color: #999;
            cursor: not-allowed;
        }

        .explanation {
            background: #fff9c4;
            border-left: 4px solid #ffc107;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
            text-align: left;
        }

        .explanation h3 {
            color: #f57c00;
            margin-bottom: 10px;
        }

        .explanation p {
            color: #5d4037;
            white-space: pre-line;
        }

        .progress-section {
            margin-top: 30px;
        }

        .progress-bar {
            background: #ddd;
            height: 12px;
            border-radius: 6px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .progress-fill {
            background: #1976d2;
            height: 100%;
            transition: width 0.3s ease;
        }

        .progress-text {
            color: #666;
            font-size: 14px;
        }

        .completion-screen {
            text-align: center;
            padding: 40px;
        }

        .completion-screen h1 {
            color: #1976d2;
            font-size: 36px;
            margin-bottom: 20px;
        }

        .score-emoji {
            font-size: 80px;
            margin: 20px 0;
        }

        .score-text {
            font-size: 24px;
            margin-bottom: 10px;
        }

        .final-score {
            font-size: 48px;
            font-weight: bold;
            color: #4caf50;
            margin-bottom: 30px;
        }

        .restart-button {
            background: #1976d2;
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 18px;
            border-radius: 10px;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .restart-button:hover {
            background: #1565c0;
        }

        .hidden {
            display: none;
        }

        /* „É¨„Çπ„Éù„É≥„Ç∑„ÉñÂØæÂøú */
        @media (max-width: 600px) {
            .container {
                padding: 10px;
            }
            
            .main-content {
                padding: 20px;
            }
            
            .question-title {
                font-size: 28px;
            }
            
            .options-grid {
                grid-template-columns: 1fr;
            }
            
            .audio-button {
                width: 80px;
                height: 80px;
                font-size: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- „Éò„ÉÉ„ÉÄ„Éº -->
        <div class="header">
            <h1>Ë®ÄË™û„ÇØ„Ç§„Ç∫</h1>
            <div class="header-info">
                <span id="questionNumber">Á¨¨1Âïè</span>
                <span id="progressCounter">1 / 5</span>
            </div>
        </div>

        <!-- „É°„Ç§„É≥„Ç≥„É≥„ÉÜ„É≥„ÉÑ -->
        <div class="main-content" id="gameContent">
            <!-- ÂïèÈ°å„Çø„Ç§„Éà„É´ -->
            <h2 class="question-title" id="questionTitle">Á¨¨1Âïè</h2>

            <!-- Èü≥Â£∞„Çª„ÇØ„Ç∑„Éß„É≥ -->
            <div class="audio-section">
                <button class="audio-button" id="audioButton" onclick="playQuestionAudio()">
                    üîä
                </button>
                <p class="audio-text">Èü≥Â£∞„Éû„Éº„ÇØ„Çí„ÇØ„É™„ÉÉ„ÇØ„Åó„Å¶ÂïèÈ°å„ÇíËÅû„Åì„ÅÜÔºÅ</p>
                
                <!-- Èü≥Â£∞„Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØË°®Á§∫ -->
                <div id="audioFallback" class="fallback-display hidden">
                    <p class="fallback-text" id="fallbackText"></p>
                    <!--<p class="fallback-description">Èü≥Â£∞„ÅåÂÜçÁîü„Åï„Çå„Å™„ÅÑÂ†¥Âêà„ÅØ„ÄÅ‰∏äË®ò„ÅÆ„ÉÜ„Ç≠„Çπ„Éà„Çí„ÅîÁ¢∫Ë™ç„Åè„Å†„Åï„ÅÑ</p>-->
                </div>
                
                <!-- ÁèæÂú®ÂÜçÁîü‰∏≠„ÅÆÈü≥Â£∞Ë°®Á§∫ -->
                <div id="audioPlaying" class="fallback-display playing hidden">
                    <p class="fallback-text" id="playingText"></p>
                </div>
            </div>

            <!-- Ê¨°„Å∏„Éú„Çø„É≥ -->
            <button class="next-button" id="nextButton" onclick="showOptions()">Ê¨°„Å∏</button>

            <!-- ÈÅ∏ÊäûËÇ¢ -->
            <div id="optionsSection" class="hidden">
                <div class="options-grid" id="optionsGrid">
                    <!-- ÂãïÁöÑ„Å´ÁîüÊàê -->
                </div>

                <!-- ÂõûÁ≠î„Éú„Çø„É≥ -->
                <button class="answer-button" id="answerButton" onclick="submitAnswer()" disabled>ÂõûÁ≠î</button>

                <!-- Ëß£Ë™¨ -->
                <div id="explanation" class="explanation hidden">
                    <h3>Ëß£Ë™¨</h3>
                    <p id="explanationText"></p>
                </div>

                <!-- Ê¨°„ÅÆÂïèÈ°å„Å∏„Éú„Çø„É≥ -->
                <button class="next-button hidden" id="nextQuestionButton" onclick="nextQuestion()">Ê¨°„ÅÆÂïèÈ°å„Å∏ÈÄ≤„ÇÄ</button>

                <!-- ÁµêÊûú„ÇíË¶ã„Çã„Éú„Çø„É≥ -->
                <button class="next-button hidden" id="showResultButton" onclick="showResult()">ÁµêÊûú„ÇíË¶ã„Çã</button>
            </div>
        </div>

        <!-- ÂÆå‰∫ÜÁîªÈù¢ -->
        <div class="completion-screen hidden" id="completionScreen">
            <h1>üéâ „ÅäÁñ≤„Çå„Åï„ÅæÔºÅ</h1>
            <div class="score-emoji" id="scoreEmoji">üèÜ</div>
            <p class="score-text">„ÅÇ„Å™„Åü„ÅÆ„Çπ„Ç≥„Ç¢</p>
            <p class="final-score" id="finalScore">5 / 5</p>
            <button class="restart-button" onclick="restartGame()">„ÇÇ„ÅÜ‰∏ÄÂ∫¶„ÉÅ„É£„É¨„É≥„Ç∏</button>
        </div>

        <!-- ÈÄ≤Êçó„Éê„Éº -->
        <div class="progress-section">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill" style="width: 20%"></div>
            </div>
            <p class="progress-text" id="progressText">ÈÄ≤Êçó: 1 / 5</p>
        </div>
    </div>

    <script>
        // ÂïèÈ°å„Éá„Éº„Çø
        const questions = [
            {
                questionId: 1,
                questionText: "„ÅÑ„Å¨",
                questionLang: "ja-JP",
                options: [
                    { label: "„ÅÑ„Å¨", text: "„ÅÑ„Å¨", lang: "ja-JP", language: "Êó•Êú¨Ë™û" },
                    { label: "Dog", text: "Dog", lang: "en-US", language: "Ëã±Ë™û" },
                    { label: "Áãó", text: "Áãó", lang: "zh-CN", language: "‰∏≠ÂõΩË™ûÔºàÁ∞°‰ΩìÔºâ" },
                    { label: "Cane", text: "Cane", lang: "it-IT", language: "„Ç§„Çø„É™„Ç¢Ë™û" }
                ],
                correctIndex: 0,
                explanation: "Ê≠£Ëß£Ôºö„ÅÑ„Å¨\n‰ªñ„ÅÆÈÅ∏ÊäûËÇ¢„ÅØ„ÄÅDog=Ëã±Ë™û„ÄÅÁãó=‰∏≠ÂõΩË™ûÔºàÁ∞°‰ΩìÔºâ„ÄÅCane=„Ç§„Çø„É™„Ç¢Ë™û „Å†„Å£„Åü„ÇàÔºÅ"
            },
            {
                questionId: 2,
                questionText: "Cat",
                questionLang: "en-US",
                options: [
                    { label: "„Å≠„Åì", text: "„Å≠„Åì", lang: "ja-JP", language: "Êó•Êú¨Ë™û" },
                    { label: "Cat", text: "Cat", lang: "en-US", language: "Ëã±Ë™û" },
                    { label: "Áå´", text: "Áå´", lang: "zh-CN", language: "‰∏≠ÂõΩË™ûÔºàÁ∞°‰ΩìÔºâ" },
                    { label: "Í≥†ÏñëÏù¥", text: "Í≥†ÏñëÏù¥", lang: "ko-KR", language: "ÈüìÂõΩË™û" }
                ],
                correctIndex: 1,
                explanation: "Ê≠£Ëß£ÔºöCatÔºàËã±Ë™ûÔºâ\n‰ªñ„ÅÆÈÅ∏ÊäûËÇ¢„ÅØ„ÄÅ„Å≠„Åì=Êó•Êú¨Ë™û„ÄÅÁå´=‰∏≠ÂõΩË™ûÔºàÁ∞°‰ΩìÔºâ„ÄÅÍ≥†ÏñëÏù¥=ÈüìÂõΩË™û „Å†„Å£„Åü„ÇàÔºÅ"
            },
            {
                questionId: 3,
                questionText: "Hoa",
                questionLang: "vi-VN",
                options: [
                    { label: "„ÅØ„Å™", text: "„ÅØ„Å™", lang: "ja-JP", language: "Êó•Êú¨Ë™û" },
                    { label: "Flower", text: "Flower", lang: "en-US", language: "Ëã±Ë™û" },
                    { label: "Ëä±", text: "Ëä±", lang: "zh-CN", language: "‰∏≠ÂõΩË™ûÔºàÁ∞°‰ΩìÔºâ" },
                    { label: "Hoa", text: "Hoa", lang: "vi-VN", language: "„Éô„Éà„Éä„É†Ë™û" }
                ],
                correctIndex: 3,
                explanation: "Ê≠£Ëß£ÔºöHoaÔºà„Éô„Éà„Éä„É†Ë™ûÔºâ\n‰ªñ„ÅÆÈÅ∏ÊäûËÇ¢„ÅØ„ÄÅ„ÅØ„Å™=Êó•Êú¨Ë™û„ÄÅFlower=Ëã±Ë™û„ÄÅËä±=‰∏≠ÂõΩË™ûÔºàÁ∞°‰ΩìÔºâ „Å†„Å£„Åü„ÇàÔºÅ"
            },
            {
                questionId: 4,
                questionText: "Î¨º",
                questionLang: "ko-KR",
                options: [
                    { label: "„Åø„Åö", text: "„Åø„Åö", lang: "ja-JP", language: "Êó•Êú¨Ë™û" },
                    { label: "Water", text: "Water", lang: "en-US", language: "Ëã±Ë™û" },
                    { label: "Ê∞¥", text: "Ê∞¥", lang: "zh-CN", language: "‰∏≠ÂõΩË™ûÔºàÁ∞°‰ΩìÔºâ" },
                    { label: "Î¨º", text: "Î¨º", lang: "ko-KR", language: "ÈüìÂõΩË™û" }
                ],
                correctIndex: 3,
                explanation: "Ê≠£Ëß£ÔºöÎ¨ºÔºàÈüìÂõΩË™ûÔºâ\n‰ªñ„ÅÆÈÅ∏ÊäûËÇ¢„ÅØ„ÄÅ„Åø„Åö=Êó•Êú¨Ë™û„ÄÅWater=Ëã±Ë™û„ÄÅÊ∞¥=‰∏≠ÂõΩË™ûÔºàÁ∞°‰ΩìÔºâ „Å†„Å£„Åü„ÇàÔºÅ"
            },
            {
                questionId: 5,
                questionText: "Hello",
                questionLang: "en-US",
                options: [
                    { label: "„Åì„Çì„Å´„Å°„ÅØ", text: "„Åì„Çì„Å´„Å°„ÅØ", lang: "ja-JP", language: "Êó•Êú¨Ë™û" },
                    { label: "Hello", text: "Hello", lang: "en-US", language: "Ëã±Ë™û" },
                    { label: "‰Ω†Â•Ω", text: "‰Ω†Â•Ω", lang: "zh-CN", language: "‰∏≠ÂõΩË™ûÔºàÁ∞°‰ΩìÔºâ" },
                    { label: "Ciao", text: "Ciao", lang: "it-IT", language: "„Éô„Éà„Éä„É†Ë™û" }
                ],
                correctIndex: 1,
                explanation: "Ê≠£Ëß£ÔºöHelloÔºàËã±Ë™ûÔºâ\n‰ªñ„ÅÆÈÅ∏ÊäûËÇ¢„ÅØ„ÄÅ„Åì„Çì„Å´„Å°„ÅØ=Êó•Êú¨Ë™û„ÄÅ‰Ω†Â•Ω=‰∏≠ÂõΩË™ûÔºàÁ∞°‰ΩìÔºâ„ÄÅCiao=„Ç§„Çø„É™„Ç¢Ë™û „Å†„Å£„Åü„ÇàÔºÅ"
            }
        ];

        // „Ç≤„Éº„É†Áä∂ÊÖã
        let currentQuestionIndex = 0;
        let selectedOption = null;
        let answered = false;
        let score = 0;
        let audioPlaying = '';
        let audioFallback = '';

        // Ë®ÄË™ûÂêç„Éû„ÉÉ„Éó
        const langMap = {
            'ja-JP': 'Êó•Êú¨Ë™û',
            'en-US': 'Ëã±Ë™û', 
            'zh-CN': '‰∏≠ÂõΩË™û',
            'ko-KR': 'ÈüìÂõΩË™û',
            'vi-VN': '„Éô„Éà„Éä„É†Ë™û',
            'it-IT': '„Ç§„Çø„É™„Ç¢Ë™û'
        };

        // Èü≥Â£∞ÂÜçÁîüÊ©üËÉΩ
        function playAudio(text, lang = 'ja-JP') {
            if ('speechSynthesis' in window) {
                try {
                    // Êó¢Â≠ò„ÅÆÈü≥Â£∞„ÇíÂÅúÊ≠¢
                    window.speechSynthesis.cancel();
                    
                    const utterance = new SpeechSynthesisUtterance(text);
                    utterance.lang = lang;
                    utterance.rate = 0.8;
                    utterance.pitch = 1.0;
                    utterance.volume = 1.0;
                    
                    utterance.onerror = (event) => {
                        console.log('Èü≥Â£∞ÂÜçÁîü„Ç®„É©„Éº:', event.error);
                        showAudioFallback(text, lang);
                    };
                    
                    utterance.onstart = () => {
                        setAudioPlaying(text);
                    };
                    
                    utterance.onend = () => {
                        setAudioPlaying('');
                    };
                    
                    window.speechSynthesis.speak(utterance);
                    
                    // „Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØ
                    setTimeout(() => {
                        if (!window.speechSynthesis.speaking) {
                            showAudioFallback(text, lang);
                        }
                    }, 500);
                    
                } catch (error) {
                    console.log('Èü≥Â£∞ÂÜçÁîü„Ç®„É©„Éº:', error);
                    showAudioFallback(text, lang);
                }
            } else {
                console.log('„Éñ„É©„Ç¶„Ç∂„ÅåText-to-Speech API„Å´ÂØæÂøú„Åó„Å¶„ÅÑ„Åæ„Åõ„Çì');
                showAudioFallback(text, lang);
            }
        }

        function showAudioFallback(text, lang) {
            const fallbackEl = document.getElementById('audioFallback');
            const fallbackTextEl = document.getElementById('fallbackText');
            
            fallbackTextEl.textContent = `üîä "${text}" (${langMap[lang] || lang})`;
            fallbackEl.classList.remove('hidden');
            
            setTimeout(() => {
                fallbackEl.classList.add('hidden');
            }, 3000);
        }

        function setAudioPlaying(text) {
            const playingEl = document.getElementById('audioPlaying');
            const playingTextEl = document.getElementById('playingText');
            const audioButton = document.getElementById('audioButton');
            
            if (text) {
                playingTextEl.textContent = `üîä ÂÜçÁîü‰∏≠`;
                playingEl.classList.remove('hidden');
                audioButton.classList.add('playing');
            } else {
                playingEl.classList.add('hidden');
                audioButton.classList.remove('playing');
            }
        }

        // ÂïèÈ°åÈü≥Â£∞ÂÜçÁîü
        function playQuestionAudio() {
            const currentQuestion = questions[currentQuestionIndex];
            playAudio(currentQuestion.questionText, currentQuestion.questionLang);
        }

        // ÈÅ∏ÊäûËÇ¢Ë°®Á§∫
        function showOptions() {
            document.getElementById('nextButton').classList.add('hidden');
            document.getElementById('optionsSection').classList.remove('hidden');
            
            const optionsGrid = document.getElementById('optionsGrid');
            const currentQuestion = questions[currentQuestionIndex];
            
            optionsGrid.innerHTML = '';
            
            currentQuestion.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.className = 'option-button';
                button.onclick = () => selectOption(index);
                button.innerHTML = `
                    <div class="option-label">
                        <span>${option.label}</span>
                        <span>‚ñ∂</span>
                    </div>
                    <div class="playing-indicator hidden" id="playing-${index}">üîä ÂÜçÁîü‰∏≠...</div>
                `;
                optionsGrid.appendChild(button);
            });
        }

        // ÈÅ∏ÊäûËÇ¢ÈÅ∏Êäû
        function selectOption(index) {
            if (answered) return;
            
            selectedOption = index;
            const currentQuestion = questions[currentQuestionIndex];
            const option = currentQuestion.options[index];
            
            // „Åô„Åπ„Å¶„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆ„Çπ„Çø„Ç§„É´„Çí„É™„Çª„ÉÉ„Éà
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.remove('selected');
                if (i === index) {
                    btn.classList.add('selected');
                }
                document.getElementById(`playing-${i}`).classList.add('hidden');
            });
            
            // Èü≥Â£∞ÂÜçÁîü
            playAudio(option.text, option.lang);
            document.getElementById(`playing-${index}`).classList.remove('hidden');
            
            // ÂõûÁ≠î„Éú„Çø„É≥„ÇíÊúâÂäπÂåñ
            document.getElementById('answerButton').disabled = false;
            
            setTimeout(() => {
                document.getElementById(`playing-${index}`).classList.add('hidden');
            }, 2000);
        }

        // ÂõûÁ≠îÈÄÅ‰ø°
        function submitAnswer() {
            if (selectedOption === null) return;
            
            answered = true;
            const currentQuestion = questions[currentQuestionIndex];
            const isCorrect = selectedOption === currentQuestion.correctIndex;
            
            if (isCorrect) {
                score++;
            }
            
            // ÈÅ∏ÊäûËÇ¢„ÅÆ„Çπ„Çø„Ç§„É´Êõ¥Êñ∞
            document.querySelectorAll('.option-button').forEach((btn, index) => {
                btn.disabled = true;
                
                if (index === currentQuestion.correctIndex) {
                    btn.classList.add('correct');
                } else if (index === selectedOption && !isCorrect) {
                    btn.classList.add('incorrect');
                } else {
                    btn.classList.add('disabled');
                }
            });
            
            // Ëß£Ë™¨Ë°®Á§∫
            document.getElementById('explanation').classList.remove('hidden');
            document.getElementById('explanationText').textContent = currentQuestion.explanation;
            
            // „Éú„Çø„É≥Ë°®Á§∫Âàá„ÇäÊõø„Åà
            document.getElementById('answerButton').classList.add('hidden');
            
            if (currentQuestionIndex < questions.length - 1) {
                document.getElementById('nextQuestionButton').classList.remove('hidden');
            } else {
                document.getElementById('showResultButton').classList.remove('hidden');
            }
        }

        // Ê¨°„ÅÆÂïèÈ°å
        function nextQuestion() {
            currentQuestionIndex++;
            selectedOption = null;
            answered = false;
            
            updateDisplay();
            resetUI();
        }

        // Ë°®Á§∫Êõ¥Êñ∞
        function updateDisplay() {
            const currentQuestion = questions[currentQuestionIndex];
            
            document.getElementById('questionNumber').textContent = `Á¨¨${currentQuestion.questionId}Âïè`;
            document.getElementById('progressCounter').textContent = `${currentQuestionIndex + 1} / ${questions.length}`;
            document.getElementById('questionTitle').textContent = `Á¨¨${currentQuestion.questionId}Âïè`;
            
            // ÈÄ≤Êçó„Éê„ÉºÊõ¥Êñ∞
            const progressPercent = ((currentQuestionIndex + 1) / questions.length) * 100;
            document.getElementById('progressFill').style.width = `${progressPercent}%`;
            document.getElementById('progressText').textContent = `ÈÄ≤Êçó: ${currentQuestionIndex + 1} / ${questions.length}`;
        }

        // UI „É™„Çª„ÉÉ„Éà
        function resetUI() {
            document.getElementById('nextButton').classList.remove('hidden');
            document.getElementById('optionsSection').classList.add('hidden');
            document.getElementById('explanation').classList.add('hidden');
            document.getElementById('nextQuestionButton').classList.add('hidden');
            document.getElementById('showResultButton').classList.add('hidden');
            document.getElementById('answerButton').classList.remove('hidden');
            document.getElementById('answerButton').disabled = true;
            document.getElementById('audioFallback').classList.add('hidden');
            document.getElementById('audioPlaying').classList.add('hidden');
        }

        // ÁµêÊûúË°®Á§∫
        function showResult() {
            document.getElementById('gameContent').classList.add('hidden');
            document.getElementById('completionScreen').classList.remove('hidden');
            
            const scoreEmoji = score === questions.length ? 'üèÜ' : 
                             score >= questions.length / 2 ? 'ü•à' : 'ü•â';
            
            document.getElementById('scoreEmoji').textContent = scoreEmoji;
            document.getElementById('finalScore').textContent = `${score} / ${questions.length}`;
        }

        // „Ç≤„Éº„É†ÂÜçÈñã
        function restartGame() {
            currentQuestionIndex = 0;
            selectedOption = null;
            answered = false;
            score = 0;
            audioPlaying = '';
            audioFallback = '';
            
            document.getElementById('gameContent').classList.remove('hidden');
            document.getElementById('completionScreen').classList.add('hidden');
            
            updateDisplay();
            resetUI();
        }

        // ÂàùÊúüÂåñ
        updateDisplay();
    </script>
</body>
</html>
